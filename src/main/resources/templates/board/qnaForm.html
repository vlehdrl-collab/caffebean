<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<body>
  <section layout:fragment="content">
    <h2 th:text="${qna.id != null} ? '질문 수정' : '새 질문 작성'">질문 작성</h2>
    <form th:action="${qna.id != null} ? @{/qna/edit/{id}(id=${qna.id})} : @{/qna}" method="post" enctype="multipart/form-data" th:object="${qna}">
      <div class="mb-3">
        <label for="title">제목</label>
        <input type="text" id="title" th:field="*{title}" class="form-control" required />
      </div>
      <div class="mb-3">
        <label for="writer">작성자</label>
        <input type="text" id="writer" th:field="*{writer}" class="form-control" required />
      </div>
      <div class="mb-3">
        <label for="content">내용</label>
        <textarea id="content" th:field="*{content}" class="form-control" rows="10" required></textarea>
      </div>
      <div class="mb-3">
        <label for="file">첨부파일</label>
        <input type="file" name="file" id="file" class="form-control"/>
        <div th:if="${qna.fileOriginalName}">
          기존 파일: <a th:href="@{/qna/files/{fileName}(fileName=${qna.fileStoredName})}" th:text="${qna.fileOriginalName}"></a>
        </div>
      </div>
      <button type="submit" class="btn btn-primary" th:text="${qna.id != null} ? '수정' : '등록'">등록</button>
      <a class="btn btn-secondary" th:href="@{/qna}">취소</a>
    </form>
  </section>
</body>
</html>